{
    "componentChunkName": "component---src-pages-archive-js",
    "path": "/archive/",
    "result": {"data":{"site":{"siteMetadata":{"title":"xidolog","author":"Pjainxido","labels":[{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"M11.177 25.3a1.94 1.94 0 0 1-.969-.259l-3.086-1.826c-.46-.257-.235-.349-.083-.402.614-.213.739-.262 1.394-.635.069-.038.159-.024.231.018l2.37 1.407a.304.304 0 0 0 .287 0l9.241-5.333a.292.292 0 0 0 .141-.25V7.355a.3.3 0 0 0-.143-.255l-9.237-5.329a.29.29 0 0 0-.285 0L1.803 7.102a.296.296 0 0 0-.146.253v10.666c0 .102.056.198.145.247l2.532 1.462c1.374.687 2.215-.122 2.215-.935V8.265c0-.149.12-.266.269-.266H7.99c.146 0 .267.117.267.266v10.53c0 1.833-.998 2.885-2.736 2.885-.534 0-.955 0-2.129-.579L.969 19.706A1.953 1.953 0 0 1 0 18.02V7.355c0-.693.371-1.339.969-1.684l9.242-5.34a2.023 2.023 0 0 1 1.942 0l9.241 5.34c.599.346.971.992.971 1.684V18.02c0 .693-.372 1.337-.971 1.686l-9.241 5.335a1.942 1.942 0 0 1-.973.259zm2.855-7.348c-4.045 0-4.892-1.857-4.892-3.414 0-.148.118-.266.266-.266h1.195c.133 0 .245.096.265.226.18 1.216.717 1.831 3.164 1.831 1.946 0 2.775-.441 2.775-1.473 0-.596-.234-1.037-3.26-1.334-2.528-.25-4.093-.809-4.093-2.831 0-1.865 1.572-2.977 4.207-2.977 2.961 0 4.425 1.027 4.611 3.233a.27.27 0 0 1-.267.291h-1.2a.266.266 0 0 1-.259-.209c-.288-1.28-.988-1.689-2.886-1.689-2.126 0-2.373.74-2.373 1.295 0 .673.292.869 3.161 1.248 2.84.375 4.19.907 4.19 2.902 0 2.014-1.678 3.167-4.606 3.167z","size":20,"color":"lightgreen"},{"tag":"git","tech":"Git","name":"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187","size":20,"color":"white"},{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow"},{"tag":"css","tech":"CSS","name":"M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z","size":20,"color":"teal"},{"tag":"python","tech":"Python","name":"M14.31.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.83l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.23l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05L0 11.97l.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.24l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05 1.07.13zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09-.33.22zM21.1 6.11l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01.21.03zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08-.33.23z","size":20,"color":"deepskyblue"},{"tag":"ruby","tech":"Ruby","name":"M20.156.083c3.033.525 3.893 2.598 3.829 4.77L24 4.822 22.635 22.71 4.89 23.926h.016C3.433 23.864.15 23.729 0 19.139l1.645-3 2.819 6.586.503 1.172 2.805-9.144-.03.007.016-.03 9.255 2.956-1.396-5.431-.99-3.9 8.82-.569-.615-.51L16.5 2.114 20.159.073l-.003.01zM0 19.089v.026-.029.003zM5.13 5.073c3.561-3.533 8.157-5.621 9.922-3.84 1.762 1.777-.105 6.105-3.673 9.636-3.563 3.532-8.103 5.734-9.864 3.957-1.766-1.777.045-6.217 3.612-9.75l.003-.003z","size":20,"color":"crimson"},{"tag":"java","tech":"Java","name":"M8.851 18.56s-.917.534.653.714c1.902.218 2.874.187 4.969-.211 0 0 .552.346 1.321.646-4.699 2.013-10.633-.118-6.943-1.149M8.276 15.933s-1.028.761.542.924c2.032.209 3.636.227 6.413-.308 0 0 .384.389.987.602-5.679 1.661-12.007.13-7.942-1.218M13.116 11.475c1.158 1.333-.304 2.533-.304 2.533s2.939-1.518 1.589-3.418c-1.261-1.772-2.228-2.652 3.007-5.688 0-.001-8.216 2.051-4.292 6.573M19.33 20.504s.679.559-.747.991c-2.712.822-11.288 1.069-13.669.033-.856-.373.75-.89 1.254-.998.527-.114.828-.093.828-.093-.953-.671-6.156 1.317-2.643 1.887 9.58 1.553 17.462-.7 14.977-1.82M9.292 13.21s-4.362 1.036-1.544 1.412c1.189.159 3.561.123 5.77-.062 1.806-.152 3.618-.477 3.618-.477s-.637.272-1.098.587c-4.429 1.165-12.986.623-10.522-.568 2.082-1.006 3.776-.892 3.776-.892M17.116 17.584c4.503-2.34 2.421-4.589.968-4.285-.355.074-.515.138-.515.138s.132-.207.385-.297c2.875-1.011 5.086 2.981-.928 4.562 0-.001.07-.062.09-.118M14.401 0s2.494 2.494-2.365 6.33c-3.896 3.077-.888 4.832-.001 6.836-2.274-2.053-3.943-3.858-2.824-5.539 1.644-2.469 6.197-3.665 5.19-7.627M9.734 23.924c4.322.277 10.959-.153 11.116-2.198 0 0-.302.775-3.572 1.391-3.688.694-8.239.613-10.937.168 0-.001.553.457 3.393.639","size":20,"color":"wheat"},{"tag":"angular","tech":"Angular","name":"M9.93 12.645h4.134L11.996 7.74M11.996.009L.686 3.988l1.725 14.76 9.585 5.243 9.588-5.238L23.308 3.99 11.996.01zm7.058 18.297h-2.636l-1.42-3.501H8.995l-1.42 3.501H4.937l7.06-15.648 7.057 15.648z","size":20,"color":"red"},{"tag":"html","tech":"HTML","name":"M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z","size":20,"color":"darkorange"},{"tag":"php","tech":"php","name":"M7.01 10.207h-.944l-.515 2.648h.838c.556 0 .97-.105 1.242-.314.272-.21.455-.559.55-1.049.092-.47.05-.802-.124-.995-.175-.193-.523-.29-1.047-.29zM12 5.688C5.373 5.688 0 8.514 0 12s5.373 6.313 12 6.313S24 15.486 24 12c0-3.486-5.373-6.312-12-6.312zm-3.26 7.451c-.261.25-.575.438-.917.551-.336.108-.765.164-1.285.164H5.357l-.327 1.681H3.652l1.23-6.326h2.65c.797 0 1.378.209 1.744.628.366.418.476 1.002.33 1.752a2.836 2.836 0 0 1-.305.847c-.143.255-.33.49-.561.703zm4.024.715l.543-2.799c.063-.318.039-.536-.068-.651-.107-.116-.336-.174-.687-.174H11.46l-.704 3.625H9.388l1.23-6.327h1.367l-.327 1.682h1.218c.767 0 1.295.134 1.586.401s.378.7.263 1.299l-.572 2.944h-1.389zm7.597-2.265a2.782 2.782 0 0 1-.305.847c-.143.255-.33.49-.561.703a2.44 2.44 0 0 1-.917.551c-.336.108-.765.164-1.286.164h-1.18l-.327 1.682h-1.378l1.23-6.326h2.649c.797 0 1.378.209 1.744.628.366.417.477 1.001.331 1.751zM17.766 10.207h-.943l-.516 2.648h.838c.557 0 .971-.105 1.242-.314.272-.21.455-.559.551-1.049.092-.47.049-.802-.125-.995s-.524-.29-1.047-.29z","size":20,"color":"violet"},{"tag":"mongodb","tech":"MongoDB","name":"M17.18 9.518c-1.263-5.56-4.242-7.387-4.562-8.086C12.266.939 11.885 0 11.885 0c-.002.019-.004.031-.005.049v.013h-.001c-.002.015-.003.025-.004.039v.015h-.002c0 .01-.002.018-.002.026v.026h-.003c-.001.008-.001.018-.003.025v.021h-.002c0 .007 0 .015-.002.021v.02h-.002c0 .01-.001.022-.002.032v.002c-.003.017-.006.034-.009.05v.008h-.002c-.001.004-.003.008-.003.012v.017h-.003v.022h-.005v.018h-.005v.021h-.004v.019h-.004v.017h-.006v.014h-.004v.018h-.004v.014h-.005v.013H11.8v.015h-.004c-.001.001-.001.003-.001.004v.01h-.003c-.001.002-.001.004-.001.006v.006h-.002c-.001.003-.002.008-.002.01-.003.007-.007.014-.01.021v.002c-.002.002-.004.005-.005.007v.008h-.004v.008h-.005v.008h-.003v.01h-.006v.014h-.004v.004h-.004v.008h-.004v.011h-.004v.008h-.006v.011h-.004v.008h-.005v.008h-.003v.01h-.005v.008h-.004v.006h-.004v.008h-.006V.76h-.004v.006h-.005v.008h-.004v.011h-.005v.004h-.003v.008h-.006v.004h-.004v.01h-.004v.004h-.004v.008h-.005v.006h-.003l-.002.004v.004h-.002c-.001.002-.002.002-.002.004v.001h-.001c-.001.003-.002.005-.004.007v.003h-.001c-.005.006-.008.012-.012.018v.001c-.002.002-.007.006-.009.01v.002h-.001c-.001.001-.003.002-.003.003v.003h-.002l-.003.003v.001h-.001c0 .001-.002.002-.003.004v.004h-.003l-.002.002v.002h-.002c0 .002-.002.002-.002.003v.003h-.004c0 .001-.001.002-.002.003V.92h-.003v.004h-.004V.93h-.004v.008h-.005V.93h-.005v.004h-.004V.94h-.005v.008h-.005v.004h-.004v.006h-.004v.004h-.004V.97h-.006v.004h-.004V.98h-.005v.004h-.004v.005h-.005v.01h-.002v.004h-.006v.005h-.004v.002h-.004v.004h-.005v.01h-.004v.004h-.005v.004h-.004v.006h-.005v.004h-.005v.004h-.004v.004h-.004v.01h-.004v.005h-.006v.004h-.004v.004h-.005v.006h-.004v.004h-.005v.007h-.004v.004h-.006V1.1h-.002v.004h-.004v.004h-.005v.004h-.004v.006h-.005v.004h-.003c-.001.001-.001.002-.001.002v.002h-.002l-.004.004s-.002.002-.004.003v.006h-.004v.005h-.004v.004h-.004v.004h-.003l-.003.003v.003h-.002l-.002.002v.003h-.002c-.005.006-.007.01-.014.016-.002.002-.008.007-.012.01-.012.008-.027.021-.039.032-.008.005-.016.012-.022.017v.001h-.001c-.016.013-.031.025-.049.039v.001c-.024.02-.047.039-.074.062V1.34h-.002c-.057.047-.117.1-.186.159V1.5h-.001c-.169.148-.37.338-.595.568l-.015.015-.004.004C9 3.494 6.857 6.426 6.631 11.164c-.02.392-.016.773.006 1.144v.009c.109 1.867.695 3.461 1.428 4.756v.001c.292.516.607.985.926 1.405v.001c1.102 1.455 2.227 2.317 2.514 2.526.441 1.023.4 2.779.4 2.779l.644.215s-.131-1.701.053-2.522c.057-.257.192-.476.349-.662.106-.075.42-.301.797-.645.018-.019.028-.036.044-.054 1.521-1.418 4.362-4.91 3.388-10.599z","size":20,"color":"green"},{"tag":"vscode","tech":"VS Code","name":"M23.15 2.587L18.21.21a1.494 1.494 0 0 0-1.705.29l-9.46 8.63-4.12-3.128a.999.999 0 0 0-1.276.057L.327 7.261A1 1 0 0 0 .326 8.74L3.899 12 .326 15.26a1 1 0 0 0 .001 1.479L1.65 17.94a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63a1.492 1.492 0 0 0 1.704.29l4.942-2.377A1.5 1.5 0 0 0 24 20.06V3.939a1.5 1.5 0 0 0-.85-1.352zm-5.146 14.861L10.826 12l7.178-5.448v10.896z","size":20,"color":"deepskyblue"},{"tag":"graphql","tech":"GraphQL","name":"M14.051 2.751l4.935 2.85c.816-.859 2.173-.893 3.032-.077.148.14.274.301.377.477.589 1.028.232 2.339-.796 2.928-.174.1-.361.175-.558.223v5.699c1.146.273 1.854 1.423 1.58 2.569-.048.204-.127.4-.232.581-.592 1.023-1.901 1.374-2.927.782-.196-.113-.375-.259-.526-.429l-4.905 2.832c.372 1.124-.238 2.335-1.361 2.706-.217.071-.442.108-.67.108-1.181.001-2.139-.955-2.14-2.136 0-.205.029-.41.088-.609l-4.936-2.847c-.816.854-2.171.887-3.026.07-.854-.816-.886-2.171-.07-3.026.283-.297.646-.506 1.044-.603l.001-5.699c-1.15-.276-1.858-1.433-1.581-2.584.047-.198.123-.389.224-.566.592-1.024 1.902-1.374 2.927-.782.177.101.339.228.48.377l4.938-2.85C9.613 1.612 10.26.423 11.39.088 11.587.029 11.794 0 12 0c1.181-.001 2.139.954 2.14 2.134.001.209-.03.418-.089.617zm-.515.877c-.019.021-.037.039-.058.058l6.461 11.19c.026-.009.056-.016.082-.023V9.146c-1.145-.283-1.842-1.442-1.558-2.588.006-.024.012-.049.019-.072l-4.946-2.858zm-3.015.059l-.06-.06-4.946 2.852c.327 1.135-.327 2.318-1.461 2.645-.026.008-.051.014-.076.021v5.708l.084.023 6.461-11.19-.002.001zm2.076.507c-.39.112-.803.112-1.192 0l-6.46 11.189c.294.283.502.645.6 1.041h12.911c.097-.398.307-.761.603-1.044L12.597 4.194zm.986 16.227l4.913-2.838c-.015-.047-.027-.094-.038-.142H5.542l-.021.083 4.939 2.852c.388-.404.934-.653 1.54-.653.627 0 1.19.269 1.583.698z","size":20,"color":"hotpink"},{"tag":"gatsby","tech":"Gatsby","name":"M12.001.007C5.326.007.007 5.326.007 12S5.326 23.995 12 23.995s11.994-5.319 11.994-11.994S18.676.007 12.001.007zM2.614 12.105l9.283 9.283c-5.111 0-9.283-4.172-9.283-9.283zm11.473 9.074L2.823 9.915C3.76 5.743 7.516 2.614 12 2.614a9.476 9.476 0 0 1 7.614 3.86L18.259 7.62a7.657 7.657 0 0 0-6.362-3.337A7.555 7.555 0 0 0 4.7 9.393l9.804 9.805c2.4-.835 4.276-2.92 4.798-5.424h-4.068v-1.773h6.154c0 4.485-3.129 8.24-7.301 9.178z","size":20,"color":"rebeccapurple"}]}},"allMarkdownRemark":{"totalCount":13,"edges":[{"node":{"excerpt":"numble-find-diff https://github.com/pjainxido/numble-find-diff 배포주소: https://numble-find-diff.vercel.app/  💻 코드 next.js로 프로젝트를 생성해 pages 내 index.tsx에 FindDiffgame 컴포넌트를 추가했습니다. 전체적인 게임 컴포넌트로, props…","html":"<h1>numble-find-diff</h1>\n<p><a href=\"https://github.com/pjainxido/numble-find-diff\">https://github.com/pjainxido/numble-find-diff</a></p>\n<p>배포주소: <a href=\"https://numble-find-diff.vercel.app/\">https://numble-find-diff.vercel.app/</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 471px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/300ec4f4ae89b8a2bb1a66e20af2035f/1f09d/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.9936305732484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACYElEQVQ4y72Ty08TQRzHty0lIn2CfUDpu7TVbBtAsNVoCG3iBTRojPHi2cR/p5K0F0QxmHBsogfDRS3EkwnudvsAi5REucgNY23TrzPT58Y9kJgwySfzy8zuZ36/eXBv3n5CLidhZ6eEra3PLN7eLuL9BwEfcyIE4TuqR6eoVnscHp7i+PgXan9q+F2TwwWcJYQ8ZQScBQTdZRKX4B0v4trUPhI3K3Db6XgRk64WdN5xScLjR1UoNc5iEGE352WM6kRcCVBpGSPDIsZGenPjo3noBwU8uPuNCZrNpgyOfjxhkdiqFBrbTHlEQiVcv7oHi0E+77JJMF8U8fCeXNjNkK7a+biD1UiEwRLiM0SoF2VCp1WCaYgIl89L2Cm5H1pylJVcIvIvRCLCYREYLptISt4lJVeUhXTTrWSfLG1obCYZhL1FzEWPSDYVssABEbcYMx9AN1DB/Ts/lIU3ZvdwK7Yvgx7G0u2vWF7KYopfQ2xmHXPTLeKzr8CHV/H0yTtl4aSrwLIJedp4C/BPFBGbJvsY4aEd5KDXq6DTcQyDUQ2VisPi4oKysHMP6b5R7GaR3EMJl/0CPG4eHMcRVO2eomb9/PzCWU+ZiiXwQQF+X4T9rFKpu0KNRsP6RCJxdqHV2BL6fPw/QrVafc5C+jbpZe2RJ2+3gGhYRCAQbZc5wEQUrVbLxpLJpLJQrxXYzTdeEBimIQHDGhE+xy5sNl/fYciJx+PKwpfPT7C+JufF6gk2X//ExsYmVlaeIZ3OENKMTCaDVCqFbDarLMR/tH5RV9ioN6FIg9JAvV5XhM4pZfgXBi3w8HRzts0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/300ec4f4ae89b8a2bb1a66e20af2035f/1f09d/Untitled.png\"\n        srcset=\"/static/300ec4f4ae89b8a2bb1a66e20af2035f/1f09d/Untitled.png 471w\"\n        sizes=\"(max-width: 471px) 100vw, 471px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>💻 코드</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> type <span class=\"token punctuation\">{</span> NextPage <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'next'</span>\n<span class=\"token keyword\">import</span> FindDiffGame <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FindDiffGame'</span>\n\n<span class=\"token keyword\">const</span> Home<span class=\"token operator\">:</span> <span class=\"token function-variable function\">NextPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      &lt;FindDiffGame boardSide=</span><span class=\"token punctuation\">{</span><span class=\"token number\">360</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"> timePenalty =</span><span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"> timePerStage=</span><span class=\"token punctuation\">{</span><span class=\"token number\">15</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"> />\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Home</code></pre></div>\n<p>next.js로 프로젝트를 생성해 pages 내 index.tsx에 FindDiffgame 컴포넌트를 추가했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">IFindDiffGame</span> <span class=\"token punctuation\">{</span>\n  boardSide<span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n  timePenalty<span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n  timePerStage<span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> FindDiffGame<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token constant\">FC</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IFindDiffGame</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> = ({ boardSide, timePenalty, timePerStage }) => </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>gameReducer<span class=\"token punctuation\">,</span> initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isPlaying<span class=\"token punctuation\">,</span> stage<span class=\"token punctuation\">,</span> score<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> answer<span class=\"token punctuation\">,</span> defaultColor<span class=\"token punctuation\">,</span> answerColor <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> state<span class=\"token punctuation\">;</span></code></pre></div>\n<p>전체적인 게임 컴포넌트로, props로 게임판의 한변의 길이, 실패시 패널티 시간, 스테이지당 시간 옵션을 추가하여 커스텀 가능하게 설정했습니다. 해당 컴포넌트에서 관리할 state의 종류가 너무 많아 useReducer 훅을 통해 상태를 관리합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> gameReducer <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>state<span class=\"token operator\">:</span> State<span class=\"token punctuation\">,</span> action<span class=\"token operator\">:</span> Action<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token parameter\">State</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"START_STAGE\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">const</span> blockCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>stage <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> answerIndex <span class=\"token operator\">=</span> <span class=\"token function\">getRandomInteger</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> blockCount <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> defaultColor<span class=\"token punctuation\">,</span> answerColor <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">getRandomPairColor</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>stage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        isPlaying<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        answer<span class=\"token operator\">:</span> answerIndex<span class=\"token punctuation\">,</span>\n        time<span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">,</span>\n        defaultColor<span class=\"token operator\">:</span> defaultColor<span class=\"token punctuation\">,</span>\n        answerColor<span class=\"token operator\">:</span> answerColor<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"CLEAR_STAGE\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        stage<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>stage <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        score<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>score <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>stage<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> state<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"TIME_DECREASE\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> time<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>time <span class=\"token operator\">&lt;</span> action<span class=\"token punctuation\">.</span>time <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>time <span class=\"token operator\">-</span> action<span class=\"token punctuation\">.</span>time <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"RESET_GAME\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>initialState <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"GAME_OVER\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> isPlaying<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Action type error\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>리듀서에서는 stage를 시작하며 기본색, 정답색, 정답블록의 인덱스를 설정하는 START<em>STAGE를 통해 게임을 실행합니다.\nCLEAR</em>STAGE는 게임을 클리어하면 실행하며 stage를 +1하고 챌린지 문서에서 요구한 로직대로 score를 더해줍니다.</p>\n<p>TIME_DECREAE는 입력한 값만큼  time을 감소시키며, 챌린지에서 예시로 배포한 프로젝트와 동일하게 time값을 0보다 작아질경우 0으로 설정합니다.</p>\n<p>RESET<em>GAME은 initialState로 게임을 초기화 하며, GAME</em>OVER는 isPlaying 옵션을 false로 수정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">\t<span class=\"token keyword\">const</span> blockRowCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>stage <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> totalBlockCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>blockRowCount<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> blockSideLength <span class=\"token operator\">=</span> boardSide <span class=\"token operator\">/</span> blockRowCount <span class=\"token operator\">-</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">decreaseTime</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input<span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"TIME_DECREASE\"</span><span class=\"token punctuation\">,</span> time<span class=\"token operator\">:</span> input <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"START_STAGE\"</span><span class=\"token punctuation\">,</span> time<span class=\"token operator\">:</span> timePerStage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>stage<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> timer <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isPlaying<span class=\"token punctuation\">)</span> <span class=\"token function\">decreaseTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>isPlaying<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>time <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"GAME_OVER\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GAME OVER!\\n\"</span> <span class=\"token operator\">+</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">스테이지: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stage<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, 점수: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>score<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"RESET_GAME\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"START_STAGE\"</span><span class=\"token punctuation\">,</span> time<span class=\"token operator\">:</span> timePerStage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>time<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSelect</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">index<span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> answer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"CLEAR_STAGE\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token function\">decreaseTime</span><span class=\"token punctuation\">(</span>timePenalty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>blockRowCount, totalBlockCount, blockSideLength는 기본적인 stage값과 props로 받는 boardSide로 값을 구할수 있어 state로 사용하는대신 코드내 const값으로 작성했습니다.</p>\n<p>useEffect를 통해 대부분의 게임 로직이 동작합니다 .stage가 변할때마다 START_STAGE를 dispath해 자동적으로 게임이 플레이 되게 했습니다.\n그리고 isPlaying state를 통해 매 1초마다 시간을 1씩 감소하게했으며, time값이 0이 되는 순간 gameover가 되며, alert로 현재 스테이지와 점수를 출력합니다. 그후 alert창에서 확인을 누르면 게임을 리셋하고 stage를 재시작합니다. </p>\n<p>onSelect는 블록을 선택하면 해당 블록의 인덱스와 answer의 값이 일치하면 clear-stage를 dispatch합니다. </p>\n<p>값이 다를 경우 timePenalty만큼 시간을 감소시킵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token attr-name\">stage</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>stage<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">time</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>time<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">score</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>score<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>wrapper<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> totalBlockCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Block</span></span>\n            <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">side</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>blockSideLength<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">color</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index <span class=\"token operator\">===</span> answer <span class=\"token operator\">?</span> answerColor <span class=\"token operator\">:</span> defaultColor<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">onSelect</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onSelect<span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> Block<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token constant\">FC</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BlockProps</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> = ({ side, id, color, onSelect }) => </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">onSelect</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> width<span class=\"token operator\">:</span> side<span class=\"token punctuation\">,</span> height<span class=\"token operator\">:</span> side<span class=\"token punctuation\">,</span> backgroundColor<span class=\"token operator\">:</span> color<span class=\"token punctuation\">,</span> margin<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n<p>먼저 게임판 상단에 게임정보를 표시해주는 header 컴포넌트를 추가했습니다.\ndiv tag 내부에 블록을 렌더링하며 totalBlockCount 만큼 array를 생성후 map을 통해 블록의 크기와, color를 추가합니다. index가 answer의 인덱스와 일치하면 defaultColor 대신 answerColor를 추가합니다. 그리고 onSelect 함수를 인자로 추가해 블록을 클릭하면 Block 컴포넌트에서 id 값을 인자로 onSelect 함수를 실행해 클릭한 블록의 정답여부를 체크하여 시간을 깎거나 스테이지를 클리어합니다.</p>\n<h2>😵 어려웠던 부분</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">getRandomInteger</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">min<span class=\"token operator\">:</span> number<span class=\"token punctuation\">,</span> max<span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>max <span class=\"token operator\">-</span> min <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> min<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">plusOrMinus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">?</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getRandomPairColor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stage<span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> baseRgb<span class=\"token operator\">:</span> number<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getRandomInteger</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> matchDiff <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span>stage <span class=\"token operator\">/</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> answerRgb<span class=\"token operator\">:</span> number<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> baseRgb<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> item <span class=\"token operator\">+</span> <span class=\"token function\">plusOrMinus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>item <span class=\"token operator\">/</span> matchDiff<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> defaultColor<span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">rgb(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>baseRgb<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>baseRgb<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>baseRgb<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> answerColor<span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">rgb(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>answerRgb<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>answerRgb<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>answerRgb<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>answerColor<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> defaultColor<span class=\"token punctuation\">,</span> answerColor <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>lib 폴더내에서는 answer의 값을 정하기위해 일정범위 내의 무작위 정수를 리턴하는 getRandomInteger와 answerColor, defaultColor를 생성하는 getRandomPairColor가 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> blockRowCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>stage <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>getRandomPairColor를 작성할때 스테이지별 색깔을 어떤식으로 난이도를 높일까 고민을 많이 했었는데, FindDiffGame/index내에 있는 한 면당 블록개수를 구하는 blockRowCount의 식을 참고했습니다.\n기존 rgb의 각각의 값에 스테이지별로 점점 증가하는 값을 나누어 무작위로 더하거나 빼는 로직을 통해 answerColor를 생성합니다</p>\n<h2>✋ 마치며</h2>\n<p>처음 챌린지에 도전했는데, 거의 막바지에 신청해 급하게 진행했습니다.  코드의 구조나 state값을 설정하는 기준에 대해 고민해보고 컴포넌트의 구성에 고민을 계속하며 작성했습니다. 내 기준으로는 최선을 다한것 같으나, 내가 놓치고 있는 점을 빨리 알고 개선하고 싶은 생각이 많이 드는 챌린지 였습니다.</p>","id":"ff2e5ecd-2aac-5850-b432-54da0b2f821c","frontmatter":{"title":"Numble Challenge","date":"February 28, 2022","tags":["numble","react","useReducer","typescript"]},"fields":{"slug":"/Numble-challenge/"}}},{"node":{"excerpt":"nextjs로 페이지를 만들면서 svg파일을 import 해야 했다. 원래는 img src 내에 public 폴더에 있는 svg 파일 경로를 추가해 사용했었다. webpack에 svg loader 모듈을 추가해 해결할 수 있다. @svgr/webpack 먼저 @svgr/webpack…","html":"<p>nextjs로 페이지를 만들면서 svg파일을 import 해야 했다. 원래는 img src 내에 public 폴더에 있는 svg 파일 경로를 추가해 사용했었다.</p>\n<p>webpack에 svg loader 모듈을 추가해 해결할 수 있다.</p>\n<h1>@svgr/webpack</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add -D @svgr/webpack</code></pre></div>\n<p>먼저 @svgr/webpack을 설치한다.</p>\n<p>그리고 <code class=\"language-text\">next.config.js</code> 파일을 수정해 웹팩 설정에 해당 로더를 추가한다</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  ...\n  webpack(config) {\n    ...\n    config.module.rules.push({\n      test: /\\.svg$/,\n      use: ['@svgr/webpack'],\n    });\n\n    return config;\n  },\n};</code></pre></div>\n<p>그리고 svg파일을 아래와 같이 import 해서 컴포넌트 처럼 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import Star from './star.svg'\n\nconst App=()=>(\n  &lt;div>\n    &lt;Star/>\n  &lt;/div>\n)</code></pre></div>\n<p>추가적으로 아래와 같은 방식으로 svg 옵션을 줄 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import Star from './star.svg'\n\nconst App=()=>(\n  &lt;div>\n    &lt;Star fill='#333' width=33 height=33/>\n  &lt;/div>\n)</code></pre></div>","id":"66f3a4ae-6980-50d1-b943-03a7a2b7fa1b","frontmatter":{"title":"Svg import in Next.js","date":"October 03, 2021","tags":["next","babel","webpack","react","svg"]},"fields":{"slug":"/Next-SVG/"}}},{"node":{"excerpt":"Dynamic Import ES2020에서 추가된 dynamic Import는 앱의 빌드타임에서 모듈을 불러오는 대신 런타임에서 모듈을 불러온다. 이를 통해 첫 페이지 진입시, 렌더링에 필요한 최소한의 코드만 다운 받고, 특정 페이지 이동마다 필요한 코드를 로드해 초기 성능을 높일 수 있다. Dynamic Import의 기본 문법은 promise…","html":"<h1>Dynamic Import</h1>\n<p>ES2020에서 추가된 dynamic Import는 앱의 빌드타임에서 모듈을 불러오는 대신 런타임에서 모듈을 불러온다.</p>\n<p>이를 통해 첫 페이지 진입시, 렌더링에 필요한 최소한의 코드만 다운 받고, 특정 페이지 이동마다 필요한 코드를 로드해 초기 성능을 높일 수 있다.</p>\n<p>Dynamic Import의 기본 문법은 promise를 리턴하는것과 유사하게 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//hello.js\nconst hello = () => {console.log('hello')};\nexport default hello\n\n//index.js\nimport('./hello.js')\n  .then(module => module.default()) //  'hello'\n  .catch(error => // log error);</code></pre></div>\n<h1>Next/Dynamic</h1>\n<p>Next.js 에서는 3.0버전부터 dynamic 이라는 모듈을 통해 promise 과정없이 변수에 컴포넌트를 할당 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import dynamic from 'next/dynamic'\n\nconst DynamicComponent = dynamic(() => import('../components/hello'))\n\nfunction Home() {\n  return (\n    &lt;div>\n      &lt;Header />\n      &lt;DynamicComponent />\n      &lt;p>HOME PAGE is here!&lt;/p>\n    &lt;/div>\n  )\n}\n\nexport default Home</code></pre></div>\n<p>next.js를 사용하면서 ssr을 지원하지 않는 모듈, 즉 브라우저에서만 작동하는 라이브러리가 포함된 경우 추가적으로 {ssr: false}를 추가하면 해결할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import dynamic from 'next/dynamic';\n\nconst PostEditor = dynamic(\n  () => import('@components/PostEditor'),\n  { ssr: false },\n);</code></pre></div>\n<p>또한 컴포넌트가 로딩중 때 렌더링할 컴포넌트를 loading 옵션에 추가 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> {loading: () => (&lt;div>loading...&lt;/div>), ssr: false,}</code></pre></div>\n<p>next를 사용하는 프로젝트를 진행하면서 게시판 에디터를 추가하기위해 toast UI editor를 사용하게 되었는데,\n해당 에디터는 ssr을 지원하지 않아 <code class=\"language-text\">ssr: false</code>옵션을 통해 간단하게 해결 할 수 있었다.</p>\n<h1>Ref</h1>\n<p><a href=\"https://nextjs.org/docs/advanced-features/dynamic-import\">https://nextjs.org/docs/advanced-features/dynamic-import</a></p>","id":"73d11e5e-7595-5ae8-a033-8d6d681583b3","frontmatter":{"title":"Next Dynamic","date":"September 16, 2021","tags":["next","dynamic","ES2020","react"]},"fields":{"slug":"/2021-09-16-TIL/"}}},{"node":{"excerpt":"nextjs로 프로젝트를 진행하며 환경변수를 설정해야했다. next.js에서는 프레임워크 자체적으로 설정한 방법대로 변수를 받아오거나, webpack설정을 통해야 사용할 수 있다. dotenv-webpack  라이브러리를 설치한다. 그후 next.config.js 내에서 Dotenv 플러그인을 webpack…","html":"<p>nextjs로 프로젝트를 진행하며 환경변수를 설정해야했다.</p>\n<p>next.js에서는 프레임워크 자체적으로 설정한 방법대로 변수를 받아오거나, webpack설정을 통해야 사용할 수 있다.</p>\n<h2>dotenv-webpack</h2>\n<p><code class=\"language-text\">dotenv-webpack</code> 라이브러리를 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add dotenv-webpack</code></pre></div>\n<p>그후 next.config.js 내에서 Dotenv 플러그인을 webpack과 연결시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Dotenv = require(\"dotenv-webpack\");\n\nmodule.exports = {\n  webpack: (config) => {\n    // 기존의 웹팩 플러그인에 새로운 Dotenv플러그인을 연결시켜준다.\n    config.plugins.push(new Dotenv());\n    return config;\n  }\n};</code></pre></div>\n<p>다시 프로젝트를 실행시켜주면 <code class=\"language-text\">process.env.변수</code>로 <code class=\"language-text\">.env</code> 파일에 선언한 변수를 사용할 수 있다.</p>\n<h2>Default Environment Variables</h2>\n<p>또는 next.js의 기능으로 설정할 수 있다.\n개발환경과 배포환경에서의 환경변수 파일명을 next에서 지정한 값으로 선언하고 해당 커맨드를 통해 프로젝트를 실행하면 각 상황에 맞는 환경변수를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">next dev  // development\nnext start // production \n\n\n.env (모든 환경)\n.env.development (development 환경) \n.env.production (production 환경).</code></pre></div>\n<p>또한 각 환경변수는 브라우저 내에서 사용하기 위해서는 환경변수명 앞에 <code class=\"language-text\">NEXT_PUBLIC_</code>을 붙여야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ENV_VARIABLE=\"server_only_variable\"\nNEXT_PUBLIC_ENV_VARIABLE=\"public_variable\"</code></pre></div>\n<p>만약 NEXT_PUBLIC을 붙이는게 싫다면 <code class=\"language-text\">next.config.js</code>에 정의를 해줘야 브라우저에서 접근 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  ...\n\n  env: {\n    ENV_VARIBLE: process.env.ENV_VARIBLE\n  }\n};</code></pre></div>\n<h2>REF</h2>\n<p><a href=\"https://stackoverflow.com/questions/66137368/next-js-environment-variables-are-undefined-next-js-10-0-5\">https://stackoverflow.com/questions/66137368/next-js-environment-variables-are-undefined-next-js-10-0-5</a></p>\n<p><a href=\"https://nextjs.org/docs/basic-features/environment-variables#default-environment-variables\">https://nextjs.org/docs/basic-features/environment-variables#default-environment-variables</a></p>","id":"bce05208-2507-5835-baf6-ad77690ec804","frontmatter":{"title":"env value in Next","date":"September 04, 2021","tags":["til","next","dotenv","react"]},"fields":{"slug":"/2021-09-04-TIL/"}}},{"node":{"excerpt":"함수 성능 측정 기업 과제를 하면서 요구사항 구현은 다했으나 뭔가 부족한거같아 특정함수 실행시 실행시간을 측정해 화면에 뿌리기로 했다.\n처음엔 아무생각 없이 Date.now()로 하려했으나 좀더 작은 단위로 측정해야 해서 다른 방법을 찾아봤다.\n대표적으로 크게 두가지 방법이 있다고 한다. console.time…","html":"<h2>함수 성능 측정</h2>\n<p>기업 과제를 하면서 요구사항 구현은 다했으나 뭔가 부족한거같아 특정함수 실행시 실행시간을 측정해 화면에 뿌리기로 했다.\n처음엔 아무생각 없이 Date.now()로 하려했으나 좀더 작은 단위로 측정해야 해서 다른 방법을 찾아봤다.\n대표적으로 크게 두가지 방법이 있다고 한다.</p>\n<h2>console.time</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">console.time(label);\n\n\n// do something..\n\nconsole.timeEnd(label);</code></pre></div>\n<p>인자로 주워진 이름의 타이머를 실행, 종료한다.\nlabel에는 unique한 값이 들어가야하며, 미입력시 default라는 이름으로 동작한다.\n사용법은 간단하다. 특정 로직 실행전에 console.time을 실행하고 원하는 타이머 종료 지점에 timeEnd를 호출해 로그로 측정하면 된다.\n하지만 콘솔로만 값을 확인할 수 있어 개발자도구나 디버깅에 사용해야 할듯하고, 실제 화면에 렌더링하기에는 적합하지 않다.</p>\n<h2>performance.now</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const start = performance.now();\n\n// do something...\n\nconst end = performance.now();\nconsole.log(\"Call to doSomething took \" + (end - start) + \" milliseconds.\");</code></pre></div>\n<p>window의 performace객체를 활용해 측정하는 방법이다.</p>\n<p>사용법은 비슷하다 시작지점과 종료지점에 performance.now()를 호출해 변수에 값을 저장해 서로 차이값을 측정하면된다.</p>\n<p>DOMHighResTimeStamp를 return하며 console.time보다 더 정확하다. 그리고 메인 컨텍스트를 기준으로 측정되어 <mark style='background-color: #dcffe4'> 브라우저마다 다른 값을 반환</mark>한다.</p>\n<h2>마치며</h2>\n<p>performance.now는 좀더 정확하게 측정하고 실제 변수로 사용할 수 있어 실행시간 측정 코드를 구현할때 해당 기능을 사용했다.</p>\n<p>하지만 함수성능을 개발자레벨에서 디버깅용으로 측정한다면 console.time으로 하는게 더 좋은듯 싶다. 각 측정별로 label을 간단하게 입력 할 수 있어 사용성으로는 console.time더 좋다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bd93038d58f6e89db7ff0f15ff7806bf/9a1cf/consoletime.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.958333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNElEQVQoz4WRW26DMBBF2UmFAT8hEOKCCeW1hUr9q9T9r+J2MDEpSdV+XA1jW8dnTPQ1FljeNTInoUUGU3BwEfsIuYb5b6kSaJPhXBfICwmlMwrfo82WqC05SktNKaBpQyrmE0B3+LqWwOTCg0PMrUqVEjhFpOjA6aQxz1dMc4/KCrRzAtsUdEG6w1fbFRxAXaco2te2Vds0tB+dSoXqbDCMDsPgUF0EXocEF6txpcNNm/tRvKVgNK4gS47OKYxjDksCdc3hqOcbUPv3CVltwtg+vk9ulkfb4xoLQIWy0hin1bAjQ45mZHBzCus0hilH0xj/dgHysz6+8z7yvPSYph5nK9EuCZo3huWjw/TZI41fDpa/2e2GoXkeOYbK6c8VKTgnAxn/C/SGj9r3sA3E4yfIX8BvuQ8MJ7Zf+54AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"consoletime\"\n        title=\"consoletime\"\n        src=\"/static/bd93038d58f6e89db7ff0f15ff7806bf/9a1cf/consoletime.png\"\n        srcset=\"/static/bd93038d58f6e89db7ff0f15ff7806bf/e85cb/consoletime.png 480w,\n/static/bd93038d58f6e89db7ff0f15ff7806bf/9a1cf/consoletime.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n(이런식으로 label: 시간 방식으로 콘솔에 출력된다.)</p>\n<h2>Ref</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\">https://developer.mozilla.org/en-US/docs/Web/API/Performance/now</a></li>\n<li><a href=\"https://stackoverflow.com/questions/313893/how-to-measure-time-taken-by-a-function-to-execute\">https://stackoverflow.com/questions/313893/how-to-measure-time-taken-by-a-function-to-execute</a></li>\n</ul>","id":"710ea49e-8254-5a83-924d-278708882a2e","frontmatter":{"title":"TIL - Performance check","date":"August 17, 2021","tags":["til","FE","js","web","console.time","performance"]},"fields":{"slug":"/2021-08-17-performance/"}}},{"node":{"excerpt":"브라우저 핵심기능 사용자가 웹서버에 보려고하는 데이터를 서버에 요청(Request)하고, 서버에서 응답(Response)을 받아 받은 데이터를 통해 브라우저의 화면에 뿌려주는 것이다. 브라우저의 기본 구조 browser User Interface 요청한 창 이외의 나머지 부분(주소 표시줄, 북마크 메뉴, 이전 버튼과 다음 버튼 등) Browser…","html":"<h2>브라우저 핵심기능</h2>\n<p>사용자가 웹서버에 보려고하는 데이터를 서버에 요청(Request)하고, 서버에서 응답(Response)을 받아 받은 데이터를 통해 브라우저의 화면에 뿌려주는 것이다.</p>\n<h2>브라우저의 기본 구조</h2>\n<p><img src=\"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&#x26;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbIakgv%2FbtqFgIlxxAL%2Fq3VfAelodH3aQEt0IpgxLk%2Fimg.png\" alt=\"browser\"></p>\n<ol>\n<li>User Interface</li>\n<li>요청한 창 이외의 나머지 부분(주소 표시줄, 북마크 메뉴, 이전 버튼과 다음 버튼 등)</li>\n<li>Browser engine</li>\n<li>사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어</li>\n<li>Rendering engine</li>\n<li>response 받은 자원을 파싱하여 화면에 표시함.</li>\n<li>Networking</li>\n<li>http 요청과 같은 네트워크 호출을 하는 브라우저 내부 계층</li>\n<li>JavaScript Interpreter</li>\n<li>Js 코드를 해석 후 실행</li>\n<li>UI Backend</li>\n<li>button, check 박스등 기본적인 위젯을 그림, 플랫폼에서 명시하지 않은 일반적인 인터페이스로서, OS 사용자 인터페이스 체계를 사용.</li>\n<li>Data Persistence </li>\n<li>쿠키, 로컬 스토리지 등 브라우저 메모리를 활용해 저장하는 영역</li>\n</ol>\n<h2>Rendering Engine</h2>\n<p>서버에 요청해서 받은 자원을 화면에 표시하는 기능을 한다.</p>\n<p>렌더링 엔진은 HTML 및 XML 문서와 이미지를 표시할 수 있다.</p>\n<p>렌더링 엔진은 webkit , blink , gechko 등이 있다. 엔진별로 약간 다르지만 기본적인 동작방식은 비슷하다.</p>\n<p>크롬은 blink, 파이어 폭스는 gechko, 사파리는 webkit 엔진을 사용한다.</p>\n<h3>렌더링 엔진 동작 과정</h3>\n<p>렌더링 엔진이 html 파일을 받았을때 동작하는 과정을 간략하게 알아보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/174a5c355d90e09875e9f53cccef5806/0a47e/render-flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.041666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArUlEQVQI1wGiAF3/AMjU4fPR193109nf/8fV5bUYXsYTxtXomNLY4P/R197119/o85i230KTsttC09vk8tLY3/XT2eH/xdTnlypryhXI1uaz1Nrg/9DW3PTN2efzANXb4fzY1tT+3t3a/9Tc58Rqldg21N/uqOrq6P/p5+X+7e7v/J+64WCfuuJd7u/w+ujm5f/t7ev/1eDvqmeS1Djc5fDA7evp/+nn5f7j6O/8DhaBMOUlsLoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"render-flow\"\n        title=\"render-flow\"\n        src=\"/static/174a5c355d90e09875e9f53cccef5806/0a47e/render-flow.png\"\n        srcset=\"/static/174a5c355d90e09875e9f53cccef5806/e85cb/render-flow.png 480w,\n/static/174a5c355d90e09875e9f53cccef5806/0a47e/render-flow.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>Html 파싱 후 돔 트리 구축</li>\n<li>Render tree 구축</li>\n<li>Render tree 배치</li>\n<li>Render tree 그리기</li>\n</ol>\n<p>1번 과정에서는 Html, css각각의 파서가 있고, 각 파서들은 html은 dom트리를 구성한다.</p>\n<p>그리고 css 또한 style rules에 맞게 파싱된 후 같이 Render tree를 생성한다.<br>\n이때 여기서 Render tree는 DOM 트리에 있는 노드중 실제로 보이는 값들로만 구성한다.<br>\n예를들어 css에서<mark style='background-color: #dcffe4'> display:none</mark> 속성을 가진 노드는 렌더트리에 존재하지 않는다.<br>\n반면 <mark style='background-color: #dcffe4'> visibility: hidden </mark> 는 화면에 보이지 않지만 공간을 차지하고 있어 렌더트리에 존재한다.<br>\n당연하게도 head태그 내에 있는 값들은 보이지 않는 값이라 렌더트리에 존재하지 않는다.</p>\n<p>그 후 배치가 시작되며(layout) 각 노드를 화면의 정확한 위치에 매핑된다.\n해당 과정에서 위치 관련된 값들 (position, width, height 등)을 계산한다.</p>\n<p>마지막으로 paint는 화면에 그리는 과정이다.<br>\n만약 색이 바뀌거나 노드의 스타일이 변경된다면 layout을 거치지 않고 paint만 발생한다.</p>\n<p>위 과정들을 점진적으로 진행되는데, 렌더링 엔진은 가능하면 빠르게 화면에 표시하기 위해 모든 html을 파싱할 때까지 기다리지 않고 배치(layout)와 그리기(paint)과정을 시작한다.\n네트워크로 부터 아직 전송되지 않은 값을 기다리는 동시에 받은 내용의 일부를 먼저 화면에 표시하기 위함이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2b7c07bd7f5af231cdeaa0c3804a686/39c09/webkit_flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACs0lEQVQoz22SW0iTARTH//s2Me3BvJColVZQ4kNPQUF0oYeCCiIIu9hDBQW9ZSR0sR7EFZqB7L6cc2xutc3rnHc33cXNbZ9u+7Z9m87b1KZmuBLKeoivzdc68Hs5B34HzvkjFCLY4RDYtWolS2SwcBiGQXFxaSafq2qRvW9jeFylFEB6sk+IjWMckckHiTmFF/8tmmYhTANJIVTOIFpcIVQ8aMBvxoXqp7qLZMyO+9dfQOVOzqweiEx+iJNCaVJ44k7dP4CiiOpQAK+4GsUZudUvlJjIChys3dXr7K7qdujFZm/vo9RipTPwrnUi0C8YIkvEpiloyBmO1jfPbuwxYmMznUhs7WavrOcQiEYJ80wY8lpNe7nM7P4mHiHruHLVUau30z/iVK9NhIyVYwETZLZgg3QsMMztm89rHPCii16E1jsPQZ8eXxNpSGxl4POXPcD2NhAOA8J+DVL3s8ZXofX4i5osgRsNvb6HPFOkDMdUnA9tzaeFWkW53d9R+vKjK/fTVPRKqzt6gWfUZ8fXM0+tbmRdjcXzjiclYP/5AfZbnYLw/fyVpnCE0GTx31TYvIzS4WPk9pCUr9NcMpEdzCjZxhgd3VWVzfbLrRN+Rmahvov6JLfia+zp+cV0Znkt25YS7lDTKoCBjkFNRneedVdC770nnDzyemAzfXSyI9c81VPaOaY/JFpkUN9LcZrH6SKZjSo4+5whgrMFObMr+/aT9OEsuKkDXZPB/FGBof62YjxMtdgpVbVUU2bxdgybPfo5e7D/yXLCii5rO7otOpjdWtQZKbQ4I5CPB3HtDYPIQj4W4oXwTZcAsSUOMz2bMcc38M6JBt0f+IMTj1VDhvMmT7vBaFF3WgLDJ10zZoyQBk6PTUcMu7tQ0z6VjFGEpXDSrGfKIBZWslhLa3msyEIh6y8kYoDYWPUOEgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"webkit-flow\"\n        title=\"webkit-flow\"\n        src=\"/static/b2b7c07bd7f5af231cdeaa0c3804a686/39c09/webkit_flow.png\"\n        srcset=\"/static/b2b7c07bd7f5af231cdeaa0c3804a686/e85cb/webkit_flow.png 480w,\n/static/b2b7c07bd7f5af231cdeaa0c3804a686/39c09/webkit_flow.png 624w\"\n        sizes=\"(max-width: 624px) 100vw, 624px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n(webkit 렌더링 엔진 flow chart)</p>\n<h3>Js in browser</h3>\n<p>반면 JS는 렌더링 엔진이 아닌, JS엔진에서 처리한다.</p>\n<p>HTML파서는 script태그를 만나면 js코드 실행을 위해 Dom생성을 중지하고 JS엔진으로 제어권한을 넘긴다. 그 후 js엔진은 코드를 실행하고, 완료 후 다시 HTML파서로 제어권한을 넘긴다.</p>\n<p>즉 <mark style='background-color: #ffdce0'> script태그의 위치에 따라 dom생성이 지연될수도 있다</mark> 는 의미이며, Dom 생성중 script태그의 코드가 실행하게 되면 코드내 dom조작 로직에 에러가 발생하거나, 코드 실행이 오래걸린다면 Dom생성이 느려지게 보여 ux에 좋지 않다.\n그래서 보통 body 태그안에 script태그를 작성한다면 가장아래에 위치하는게 좋다.</p>\n<p>또는 head내에 src속성으로 외부 스크립트를 호출하는데 defer속성을 추가해 작성해야한다.\n해당 옵션을 추가하면 defer 속성이 있는 script태그를 만났을때 브라우저가 다운로드를 시작하며, </html>을 만났을때 코드가 실행된다.\n하지만 해당 속성을 사용할때 <a href=\"https://caniuse.com/?search=defer\">일부 브라우저</a>에서 지원하지 않는다는 것에 주의하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;head>\n...\n  &lt;script src=\"/examples/scripts/script_src.js\" defer>&lt;/script>\n&lt;/head></code></pre></div>","id":"3b90529d-365e-5e37-96ed-757d6bcc0fee","frontmatter":{"title":"How Browsers Work?","date":"August 14, 2021","tags":["til","browser","web"]},"fields":{"slug":"/2021-08-14-browser/"}}},{"node":{"excerpt":"JavaScript JS는 기본적으로 싱글 스레드기반 언어이다. 내부적으로 메인스레드, 즉 하나의 스레드로 구성되어 있다. 이는 곧 한번에 하나의 작업만 수행할 수 있다는 것이다. 하지만 실제 js가 동작하는 것을 보면 싱글스레드 언어임에도 불구하고  비동기적  으로 동작 할 수 있다. 여기서 비동기적(Asynchronous…","html":"<h1>JavaScript</h1>\n<p>JS는 기본적으로 <mark style='background-color: #ffdce0'>싱글 스레드기반 언어</mark>이다. 내부적으로 메인스레드, 즉 하나의 스레드로 구성되어 있다.</p>\n<p>이는 곧 한번에 하나의 작업만 수행할 수 있다는 것이다.</p>\n<p>하지만 실제 js가 동작하는 것을 보면 싱글스레드 언어임에도 불구하고 <mark style='background-color: #dcffe4'> 비동기적 </mark> 으로 동작 할 수 있다.</p>\n<blockquote>\n<p>여기서 비동기적(Asynchronous) 이란, 먼저 실행된 코드의 작업이 끝나기 전에 더 나중에 실행된 코드의 작업이 끝날 수 있음을 말한다.</p>\n</blockquote>\n<p>이를 이해하기 위해서는 js 엔진의 구조부터 이해해 나가면된다.</p>\n<h2>JS Engine</h2>\n<p><img src=\"https://miro.medium.com/max/2400/1*RLbK8nM3pfLWPu4qIUaWww.png\" alt=\"js engine\"></p>\n<p>node.js, chrome에서 사용되는 V8 엔진에 대해 알아보자. 내부는 크게 두 요소로 나눠진다.</p>\n<ul>\n<li>Memory Heap : 메모리 할당이 일어나는 곳, 코드에서 선언한 변수나 함수 저장</li>\n<li>Call Stack : Js 내에 단하나만 있으며 함수호출에 따라 호출 스택</li>\n</ul>\n<br>\n<h2>Call Stack</h2>\n<p>CallStack은 다른 언어에도 있는 개념이다.</p>\n<p>하지만 JS 내 CallStack은 하나 뿐이라 stack의 top에 함수의 실행이 끝나기 전까지는 다른 task를 진행할 수 없다.</p>\n<p>이러한 특성때문에 Js에서 함수를 처리하는 방식을 'Run to Completion'이라고 한다.</p>\n<p>call stack의 동작은 다음과 같다.</p>\n<ol>\n<li>call stack의 top에 있는 함수를 실행시킨다.</li>\n<li>함수가 호출될때 call stack에 해당 함수가 쌓이고 실행중인 함수내에서 호출되는 모든 함수는 call stack에 쌓인다.</li>\n<li>해당함수가 return 또는 모든 task를 완료하면 top에서 지운다.</li>\n</ol>\n<p>예시 코드를 보면 이해가 더 빠르다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1074px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/53f7296eb18134704510c90611468082/18539/callstack.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB3ElEQVQ4y5WUWXKrMBBFWUkSQAOamTG2K+Uqf7z9r+i+lmxiSCqO+biltlAf3241ZKE2qBsL7SSUFZCqBBc56QNC5kkV7fmg4byC0hzaiKQYr39HZZogjoJQCVjBYFQObwtKlgkUgbIqKGaUzNLeDcToDOU4nvYWZYacOcVxdg6XtsWh1ehDgbrWEFWZnEbg4jbKWEnimGeF89kQ/PE8c76ixALjscP13wXTsYHrGAEF2k4kp0IWCbqArbsDDwqnkyFnxVclCRhlrEgHtWWw5NDE1ZbUF76B3cov06p1LP/Rli+HhpIElcb56iLSgQdkDZRy24L1s8wFhaAFztrgZCxGz3Fq3jH11Bsjwfj7T+CTODmMwXRocb1+YpgCjC/gCVw3PN2kSIfzXyFrZZ4cxt7FWx3GGqGpEPoSbVthGGi/iX9Ybsp7CmxaB0suGfWw5G9pZTwnfSTdxiZ/WuYW2HkEJTBJiUFW6F2JsSnQdxYVDa98oW/fgA6GJv/QBVxOM8bRYJwZjrOjuLrP4Q6HHTn01L/oJjmKM6aK+7wtyTsctgSM7yVjb5sPwnbOdjjsh4B403Vj0irvI7I+tMthHJmoprUIsfTVF+a7XgIuZcVyl5J/S3gJ+JeTvcD/WMsPD4PCuAMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"callstack\"\n        title=\"callstack\"\n        src=\"/static/53f7296eb18134704510c90611468082/18539/callstack.png\"\n        srcset=\"/static/53f7296eb18134704510c90611468082/e85cb/callstack.png 480w,\n/static/53f7296eb18134704510c90611468082/d9199/callstack.png 960w,\n/static/53f7296eb18134704510c90611468082/18539/callstack.png 1074w\"\n        sizes=\"(max-width: 1074px) 100vw, 1074px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>\n<p>스크립트를 실행할때 js 엔진은 처음 전역 실행 컨텍스트로 main() (또는 anonymous)이 실행된다.\n이를 call stack에 추가한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack 1</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>그후 16번라인의 first()를 호출해 first()를 스택에 추가한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack 2</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">first()</td>\n</tr>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>stack의 top인 first()를 실행하며 first내의 second()를 호출해 스택에 추가한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack 3</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">second()</td>\n</tr>\n<tr>\n<td align=\"left\">first()</td>\n</tr>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>3과 마찬가지로 third를 호출한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack 4</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">third()</td>\n</tr>\n<tr>\n<td align=\"left\">second()</td>\n</tr>\n<tr>\n<td align=\"left\">first()</td>\n</tr>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>third에서 console.log를 호출한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack 5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">console.log('third')</td>\n</tr>\n<tr>\n<td align=\"left\">third()</td>\n</tr>\n<tr>\n<td align=\"left\">second()</td>\n</tr>\n<tr>\n<td align=\"left\">first()</td>\n</tr>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>console.log는 실행후 stack에서 Pop한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack 6</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">third()</td>\n</tr>\n<tr>\n<td align=\"left\">second()</td>\n</tr>\n<tr>\n<td align=\"left\">first()</td>\n</tr>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>third() pop</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack 7</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">second()</td>\n</tr>\n<tr>\n<td align=\"left\">first()</td>\n</tr>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>second(), first()도 각각 console.log를 실행하고 pop한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack 8</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>최종적으로는 main()도 pop되어 call stack에 아무것도 남지 않는다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"></td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol>\n<h3>maximum call stack</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1128px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04a826987819458efe4f22fd002361eb/7bf07/callstack_recursion.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABA0lEQVQoz52RWW6DQBBEOUliMLOvbMaJjX8snyH3P0mlGRkEJE4kPkrqrd50a7L60UBVNUysIJ0jeahJ3sNSL7Rd6msfoUOECc94IeUDtDXI4onBqBJGFlAqh5A5uDjMklQ3hsFaDusEjGVQuky5ozzVJ1GeVYxjMA6dFGhqTUVJoBFczJL04Pmjxf1+w3XoKW5wufb4vHQ49RXaLiSNcaYdR2wshDqC8XwFm2LGDwhRo2l9Mg63c8qP5VvqLZWNJ5XsfbWReIKW8KVpBG2vmJTFysAFOpP/3OyVaTu3Arpa4vLVoyxoS/Xa8B98BnL6VeXLXw37gDQ4nbs17QL+ZdgD/AZHbyWdb05DfAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"callstack_recursion\"\n        title=\"callstack_recursion\"\n        src=\"/static/04a826987819458efe4f22fd002361eb/7bf07/callstack_recursion.png\"\n        srcset=\"/static/04a826987819458efe4f22fd002361eb/e85cb/callstack_recursion.png 480w,\n/static/04a826987819458efe4f22fd002361eb/d9199/callstack_recursion.png 960w,\n/static/04a826987819458efe4f22fd002361eb/7bf07/callstack_recursion.png 1128w\"\n        sizes=\"(max-width: 1128px) 100vw, 1128px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p><mark style='background-color: #ffdce0'>RangeError: Maximum call stack size exceeded </mark></p>\n</blockquote>\n<p>간혹 코드를 재귀로 작성해서 함수를 계속 호출해, call stack이 가득찼을때 에러 메시지다.</p>\n<p>참고로 브라우저마다 call stack 최대 사이즈가 <a href=\"https://stackoverflow.com/questions/7826992/browser-javascript-stack-size-limit\">다르다.</a></p>\n<h2>Runtime</h2>\n<p>js에서 사용되는 setTimeout이나 Dom 조작을 위해 사용되는 함수들은 엄밀히 따지면 Js엔진 내에 존재 하지 않는다. 해당 함수들은 Js엔진을 실행하는 환경인 브라우저에서 제공하는 WEB Api이다.</p>\n<p><a href=\"https://ko.wikipedia.org/wiki/%EB%9F%B0%ED%83%80%EC%9E%84\">런타임(runtime)</a>이란 프로그래밍 언어가 구동되는 환경을 말한다.</p>\n<p>또한 Node.js나 크롬등의 브라우저들은 자바스크립트가 구동되는 환경이기 때문에, 이를 자바스크립트 런타임이라고 한다.</p>\n<p>구성 요소는 다음과 같다.</p>\n<p><img src=\"https://image.toast.com/aaaabcy/post/16093411160482.png\" alt=\"jas\"></p>\n<ul>\n<li>Web API : Web API는 브라우저에서 제공되는 API이다. 자바스크립트 엔진에서 정의되지 않았던 setTimeout이나 HTTP 요청(ajax) 메소드, DOM 이벤트 등의 메소드를 지원한다.</li>\n<li>Task Queue : 이벤트 발생 후 호출되어야 할 콜백 함수들이 기다리는 공간. 이벤트 루프가 정한 순서대로 줄을 서 있으므로 콜백 큐(Callback Queue) 라고도 한다. 실제 자료구조는 queue 가 아니라 Set으로 구현되어 있으며, 대기하고 있는 task 중 runnable task를 뽑아내기 위해 이러한 구조를 가진다.</li>\n<li>Event Loop : 이벤트 발생 시 Task Queue내의 호출할 콜백 함수들을 관리하고, 호출된 콜백 함수의 실행 순서를 결정한다.</li>\n</ul>\n<h2>Event Loop&#x26; Task Queue</h2>\n<p>Event loop와 task queue는 기존 js가 가진 싱글스레드의 한계를 해결해준다.</p>\n<p>일반적으로 자바스크립트에서 'callback 함수'로 실행된 함수들은 실행과 함께 별도의 WebApi로 보내져서 동작한다.</p>\n<p>그리고 WebApi에서 이벤트가 발생한다거나 시간이 되었다거나 하는 조건이 되면 Task Queue에 콜백함수를 적재한다.</p>\n<p>Event Loop는 Call Stack이 <mark style='background-color: #fff5b1'> 비어있는 것을 확인 후 </mark> Task Queue에 있는 함수를 차례대로 실행한다.</p>\n<p>예시를 보면 이해가 더 쉽다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1016px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ca53d693328cd341dd1050c515f24f0a/f4281/event_loop.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACEklEQVQ4y42U23KbMBCGeZIWc5DQWRxsgx2XTDPJ9KL3ff8n+burBOLEdcPFMmiQPu2/+y/Zn8nj12+F8txAK4HGVKjEDrXcQbyFbAoYKxBbC21oj67RqDq9f47M2xrRCwQt4EUFQwBvc1jLB2qCvQI5eM3haX+MElpXBC4pqjUyRTc7yuxsDObYYowG+1CkS6xXqEW+ZrrApknhdNJQqli/LZFZJyHplu4Q8PQy43w5wPcSxlUIoYIjgKJMeDPv9UEm4DA0dNl79ktkXBvnG5KgaZMniEIcSoRWoO2oFCRNUc0YyJI01TjStxDqtb4fgHyrJSA3oai/UUNylNUOZZ2jolgk8+ZFFme2ZHfduFeglwhG4igoZIOeMhjbHFPP2ZlV7udMFtg/JWuSMvYBj+cjjvsAZwpYUybY9cF74A9Arh8f7An0+POMcerQT4LWzVs3TaqxkMWXsBUYqCGNLt/NzNlszOgG2FFnnSWT1mRcUUCxPXROpi2Taa+hmyTHzqamXKzDHFqcaP3jSA0aHNnGJ6nc6a3QrOscFE9AVLjMI56eZ0wPA/ajwTgG9GRg63gEy20Zdr1Pg8/ypvGIw6GDI9P6vkjzGlt6D82N/LvAliR6mo5kcKvSwWRmUawGvh6xLyX33JRkix1NyferA7tNRr5tCv3j2Db7Q8Swj+mPcq+zm4D8YJlcR2PEf62yBfgXMr8SbdMn0ZYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"event_loop\"\n        title=\"event_loop\"\n        src=\"/static/ca53d693328cd341dd1050c515f24f0a/f4281/event_loop.png\"\n        srcset=\"/static/ca53d693328cd341dd1050c515f24f0a/e85cb/event_loop.png 480w,\n/static/ca53d693328cd341dd1050c515f24f0a/d9199/event_loop.png 960w,\n/static/ca53d693328cd341dd1050c515f24f0a/f4281/event_loop.png 1016w\"\n        sizes=\"(max-width: 1016px) 100vw, 1016px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>해당 코드는 callstack을 설명하는 코드에서 third함수내에 기존의 console.log부분을 setTimeout으로 호출하게 수정한 코드이다.</p>\n<p>setTimeout 으로 호출되는 console.log('third')는 setTimeout의 timeout값이 0이라 해도, task queue에 넘어가 <mark style='background-color: #dcffe4'> Call stack에 쌓여있는 함수호출이 전부 실행되면, </mark><br>\n그 이후에 실행이 되어 제일 마지막에 third가 console.log 에 찍히게 된다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">stack</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">third()</td>\n</tr>\n<tr>\n<td align=\"left\">second()</td>\n</tr>\n<tr>\n<td align=\"left\">first()</td>\n</tr>\n<tr>\n<td align=\"left\">main()</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>| queue | console.log('third') |</p>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/EventLoop#event_loop\">Mdn</a>에서 Event Loop의 동작에 관해 해당 코드로 설명하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">while(queue.waitForMessage()){\n  queue.processNextMessage();\n}</code></pre></div>\n<p>루프는 실행중인 task여부와 task queue에 task 존재 여부를 확인한다.</p>\n<p>해당 조건이 만족하면 루프내로 이동해 큐의 다음 메시지를 처리한다.</p>\n<h2>Micro task</h2>\n<p>ES2015에서 동시성을 다루기 위해 Promise와 같은 API들이 추가되었다. 이 API들은 기존에 사용되던 task queue의 task와 다른 <mark style='background-color: #ffdce0'> Micro Task </mark>를 다룬다.</p>\n<p>micro task는 <mark style='background-color: #dcffe4'> 현재 실행되고 있는 작업 바로 다음으로 실행되어야 할 비동기 작업</mark>을 뜻한다.</p>\n<p>앞의 이벤트 루프의 동작에 micro task를 추가하면 task를 기다리기 전에 micro task가 있는지를 먼저 확인하고, micro task가있다면 먼저 모든 micro task를 수행하고 나서 task를 수행한다.</p>\n<p><img src=\"https://engineering.linecorp.com/wp-content/uploads/2019/11/eventloop7.gif\" alt=\"microtask1\"></p>\n<h2>📚 Ref</h2>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/EventLoop\">https://developer.mozilla.org/ko/docs/Web/JavaScript/EventLoop</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=8aGhZQkoFbQ\">https://www.youtube.com/watch?v=8aGhZQkoFbQ</a></p>\n<p><a href=\"https://engineering.linecorp.com/ko/blog/dont-block-the-event-loop/\">https://engineering.linecorp.com/ko/blog/dont-block-the-event-loop/</a></p>","id":"32515f48-f4b9-5e90-bca0-aaaa9f331569","frontmatter":{"title":"JS call stack, event loop","date":"August 13, 2021","tags":["javascript","event loop","call stack"]},"fields":{"slug":"/2021-08-13-js/"}}},{"node":{"excerpt":"About React rendering React를 사용하면서 최적화에 대해 검색해보면 많은 글들이 말한다.  컴포넌트 렌더링을 최소한으로 줄여라 리액트를 포함한 많은 SPA에서 DOM에 렌더링하는데 비용이 가장 많이든다.   리액트 컴포넌트를 완성하고 나서 react dev tool…","html":"<h2>About React rendering</h2>\n<p>React를 사용하면서 최적화에 대해 검색해보면 많은 글들이 말한다.</p>\n<blockquote>\n<p> 컴포넌트 렌더링을 최소한으로 줄여라</p>\n</blockquote>\n<p>리액트를 포함한 많은 SPA에서 DOM에 렌더링하는데 비용이 가장 많이든다.  </p>\n<p>리액트 컴포넌트를 완성하고 나서 react dev tool로 컴포넌트 렌더링 되는 지점을 보면, 간혹 실제로 화면상으로 바뀌지 않는 지점이 하이라이트 되는것을 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 483px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d0f34614ae12a8c969e8b8cdaf1f801e/77a9e/2021-08-07_rerender.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.95833333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/0lEQVQ4y6VU2W7aUBDNX3VRl6Tf3UpJl6ipFDVJIRDANr6+3sFOCFtsw+mZMdCHLi+1NJrxvTNntmMfPXt1DNcZ4n+f7Xar+ujlm3f40b2CSV140ZjaIExDxHFMiVCWBawN1I6iEEFgYIyPkPZkMoEN7S+bfkcvCHjb68BGPvzAh7FGHdI0RRiGyPOcQW2CoiwJGBzeA2uRJAl83yeYVdAW8PYG1jgwvofAeASLGDhGEhMwSxBaJhs7KIqcVQbIeJ9nMUF89fW8ERNYlMUOsNu9wSSPNNgIYBIpeBxZjAkkgJbVTycZbYOMYHmeaEJJMBj09N1zhy1gp3MDZ3THFiNtUcQYw5YCRGzNcR1tS9oVCSP6sb04iXU0nuepv4zoUGEcBwrUDj/Sy8MMrVTqseUpz6wuR4DSNNnN2qKqnrBer/cz/MGBJrh/eECSxu3WphPaiQ5aNisym80OgAmrkw1nWaagQpumaQTwBL1+F+XjBMWsRFqkyO4z2gXPSkzLqdJEggVQbOlCtisjEWDpaC+HloOgnYM4OM6ImVO1pbJoxzOpRs6GwwFHkXEMrt4JVz2vtRWwRx4G/oDUGLIlnwvqkz6uJmk33NLJyBllNOxxwwGZ4LR+vJOYscctP3990q49ixjokjKhBsakgxUu8j0hx/bgktAnkCxRzwnmki5jctFxBr9ajkKjmUXPHgrVeR7TecChh5pIyC1ge1BJZu2Y7Q41RgrYbbmDYppqycL4IYElo/FdZr1jor4m6Pc7CiodSLB8TaLFR5NR2PIxRiT1dlPx08mwWs4123z+gPVqjgX1jNtfLR85/AkWixnmj/fqo360H3m/PzvMcNOsedhe7GW5C17tgAVU9HZbawF/kqOXb9/h+vq7bklmeHHxBefnH/H50ylOT9/j8vIbLr5+wdXVJc7OPugZsEFdP5HI1W+iLTv8wQp6Xa31J9k0G5W6biC/TdU0qqpGRftfz2GGknU5L/WvI61v6hWaaskkCzS16CX1Su3qaYH6L/ITL7Nh/l+bnD0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"어?\"\n        title=\"어?\"\n        src=\"/static/d0f34614ae12a8c969e8b8cdaf1f801e/77a9e/2021-08-07_rerender.png\"\n        srcset=\"/static/d0f34614ae12a8c969e8b8cdaf1f801e/e85cb/2021-08-07_rerender.png 480w,\n/static/d0f34614ae12a8c969e8b8cdaf1f801e/77a9e/2021-08-07_rerender.png 483w\"\n        sizes=\"(max-width: 483px) 100vw, 483px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p><del>계속 리렌더링되는 내 컴포넌트</del></p>\n</blockquote>\n<p>React가 렌더링을 실행하는 조건은 다음과 같다.   </p>\n<ul>\n<li>state 변경</li>\n<li>props 변경</li>\n<li>부모 컴포넌트 렌더링</li>\n<li>forceUpdate가 실행될때</li>\n<li>shouldComponentUpdate에서 true가 반환될때 </li>\n</ul>\n<p>부모에서 state, props, forceUpdate가 실행될때 자식도 같이 렌더링이 진행된다.</p>\n<p>즉 기본적으로 react는 부모 component로부터 받는 state,props가 변동될 경우 리렌더링 된다.  </p>\n<p>하지만 만약 state가 여러개있는데 state1값이 변했는데 state2, state3, state4가 다시 계산되서 렌더링되는 상황이 있을 수 있다.</p>\n<p>간단한 구조라면 다행이지만 만약 변경된 state1값에 비해 state2, 3, 4들이 계산하는데 오래걸린다면 상당한 손해가 아닐 수 없다.</p>\n<h2>useMemo</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/app.js\n\nimport Parent from 'Parent';\nfunction App() {\n  return (\n    &lt;div className=\"App\">\n      &lt;Parent name={'홍길동'}/>\n    &lt;/div>\n  );\n}\n\nexport default App;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/Parent.js\n\nimport { useState } from 'react';\nimport Child from 'Child';\nconst Parent = ({ name }) => {\n  const [child, setChild] = useState({ name: '춘식', age: 9 });\n  const addAge = () => {\n    setChild(prev => {\n      return {\n        ...prev,\n        age: prev.age + 1\n      }\n    })\n  }\n  const changeName = () => {\n    setChild(prev => {\n      return {\n        ...prev,\n        name: prev.name+'춘식'\n      }\n    })\n  }\n\n  return (\n    &lt;>\n      {`${name}의 아이 `}\n      &lt;Child age={child.age} name={child.name} />\n      &lt;button onClick={addAge}>자식 나이 +&lt;/button>\n      &lt;button onClick={changeName}>자식 이름 변경 &lt;/button>\n\n    &lt;/>\n  )\n}\n\nexport default Parent;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/Child.js\n\nconst getName = (name)=>{\n  console.log('이름변경!');\n  return `이름${name}`;\n}\n\nconst getAge = (age) =>{\n  console.log('나이변경!');\n  return `${age}살`;\n}\n\nconst Child = ({age, name }) => {\n  const renderName = getName(name);\n  const renderAge = getAge(age);\n \n  return (\n    &lt;div>\n      &lt;div>{renderName}&lt;/div>\n      &lt;div>{renderAge}&lt;/div>\n      \n    &lt;/div>\n  )\n}</code></pre></div>\n<p>부모 컴포넌트에서 버튼을 누르면 부모의 child state가 수정되어 child state를 props로 받는 Child컴포넌트가 리렌더링되는 코드다.<br>\n그리고 Child컴포넌트에서는 각 name, age에 대해 렌더링 될떄마다 getName, getAge를 실행해 변경된 값을 렌더링한다.</p>\n<p>하지만 해당 코드에는 문제가 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c7741cdf891c01327d5488e40c1c436/7131f/2021-08-07_bad.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVQoz52Ry07CQBSG+yIoWAqF0inTq4UKGBNfQaRxo6LxPQ3uXLvykkjSEIoBdpLwe2ZME6LQBSc56cyk+fKd/yhPo0d8vL9htfpGVuv1GpuV3cX3+mYIo2HBcQMwywbzurAdH1bTAbc9KKPnF7yOZ0gmKcbjT6Rp+g+6Cbwd3qNSraPJXTDGqS3ougG91pBvSpIukUznmH3NCTbFYrHMBQ7vHmCSmbARpq12F6bXg2EwVAmsYEvljTyIr+D6LZx0zxASTJy5E6BhcmiVGhTx09/OM+xfxgjCjsysdKRJqyCMCBzKKLYa7jLOgBHZmcxGoVCEqunwj9uyd46cF8FFfwCL/+Z3WFRRJqBNI3PatBx5H8PO6TkYjVw4KElIK+rJFpvewzCmLTuo01aFoVqukrFLmboS/gNKzR8MSvaM1wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"버그\"\n        title=\"버그\"\n        src=\"/static/9c7741cdf891c01327d5488e40c1c436/7131f/2021-08-07_bad.png\"\n        srcset=\"/static/9c7741cdf891c01327d5488e40c1c436/e85cb/2021-08-07_bad.png 480w,\n/static/9c7741cdf891c01327d5488e40c1c436/7131f/2021-08-07_bad.png 710w\"\n        sizes=\"(max-width: 710px) 100vw, 710px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>자식 나이만 더해도 getName, getAge함수가 호출되고 이름변경버튼도 마찬가지다.  </p>\n<p>솔직히 해당코드는 복잡한 로직같은게 없어서 같이 호출되도 상관없으나 만약 한번 계산하는데 오래걸리는 함수였다면 엄청난 낭비다.</p>\n<p>이럴경우 useMemo를 사용하면된다. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);</code></pre></div>\n<p><a href=\"https://ko.reactjs.org/docs/hooks-reference.html#usememo\">리액트 공식문서</a>의 useMemo페이지에 있는 예시 코드다. </p>\n<p>useMemo는 기본적으로 렌더링 중에 실행된다.   </p>\n<p>두번째 인자에 넣는 배열의 값이 변경될때 내부의 함수를 호출해 연산하고, 배열내부의 값이 그대로 일때, 전에 호출했던 연산결과를 재사용한다(<a href=\"https://ko.wikipedia.org/wiki/%EB%A9%94%EB%AA%A8%EC%9D%B4%EC%A0%9C%EC%9D%B4%EC%85%98\">memoization</a>). </p>\n<p>만약 두번째 인자를 비운다면 다른 훅들과 마찬가지로 매번 실행된다.</p>\n<p>위 코드에서 메모이제이션 할 값들은 renderName, renderAge다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import {  useMemo } from 'react'\n\nconst getName = (name)=>{\n  console.log('이름변경!');\n  return `이름${name}`;\n}\n\nconst getAge = (age) =>{\n  console.log('나이변경!');\n  return `${age}살`;\n}\n\nconst Child = ({age, name }) => {\n  const renderName =useMemo(()=>getName(name),[name]) ;\n  const renderAge = useMemo(()=>getAge(age),[age]);\n\n  return (\n    &lt;div>\n      &lt;div>{renderName}&lt;/div>\n      &lt;div>{renderAge}&lt;/div>\n      \n    &lt;/div>\n  )\n}\n\nexport default Child;</code></pre></div>\n<p>이렇게 수정후 버튼을 클릭하면 수정되는 값에만 함수가 호출된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 695px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/18602f5bb8d510f11b578b0019ffee32/83b75/2021-08-07_good.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUklEQVQoz5WRy07CQBSG+wwsXKncpJZ26L1YUC6G+HYYQjCKyMYnIS6JceMO1IREIFxkIzEItv0dBjFKumGSP2fOJPPlmzNc466B5n0TrecnjCYTzJ0vzBYLmvlPXeXjc4blqlxeQSAyDDsNoqogyTw0OwvLTtFeB/fw2EanO0avP0Sv18X0fQq/5bouq9XrGng+DsNIQtMtKIoOUSQQBAky3XOtzggvr2P0h28MOBgM2EXP8/7FcRx2XrupQyIqVM0EfyhSsAXdPkWc6AzK+dksAZv9GlguVxCXFGRyBdjpLE0GmpWGrFn0PAHOdT24GzZ/DTeBxeI5fZqBEwoUiQJBTMC0bJjJFOt9Df2Mfw2rdZiZM+TyBezuBbEfjECls0wd59gYtgCuPuWifouYcgSdzi4cibFI1GwJFSV5e8NSqYxAYAeRKI9Q+ADBUJTVdb4BKE7kwUpWX+oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"good\"\n        title=\"good\"\n        src=\"/static/18602f5bb8d510f11b578b0019ffee32/83b75/2021-08-07_good.png\"\n        srcset=\"/static/18602f5bb8d510f11b578b0019ffee32/e85cb/2021-08-07_good.png 480w,\n/static/18602f5bb8d510f11b578b0019ffee32/83b75/2021-08-07_good.png 695w\"\n        sizes=\"(max-width: 695px) 100vw, 695px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>예시 코드는 값을 연산하는데 큰 비용이 소모되지 않아, 큰 차이는 없으나 react 예시 코드의 함수명처럼 연산하는데 많은 리소스를 소모 하는 로직일 경우 useMemo를 사용하면 되겠다. </p>","id":"524e5e2f-cc6a-5243-b56b-2e6927e33d8e","frontmatter":{"title":"TIL - React 렌더링 최적화","date":"August 07, 2021","tags":["til","react","render","useMemo"]},"fields":{"slug":"/2021-08-07-TIL/"}}},{"node":{"excerpt":"Toast Component 이번에 협업 과제를 하며 toast 알람 컴포넌트를 제작했다.  토스트 알람이란 특정 위치에 토스트기계에서 토스트가 튀어오르듯 생성되는 알람이라고 한다.  해당 컴포넌트를 통해 각 페이지 내에서 message와 mode를 입력해 원하는 toast…","html":"<h2>Toast Component</h2>\n<p>이번에 협업 과제를 하며 toast 알람 컴포넌트를 제작했다. </p>\n<p>토스트 알람이란 특정 위치에 토스트기계에서 토스트가 튀어오르듯 생성되는 알람이라고 한다. </p>\n<p>해당 컴포넌트를 통해 각 페이지 내에서 message와 mode를 입력해 원하는 toast 알람 메시지를 뜨게 하는게 목표다. </p>\n<p>이 컴포넌트를 완성하면서 새롭게 배웠던 것들을 작성해보고자 한다. </p>\n<h2>createPortal</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ReactDOM.createPortal( child, container )</code></pre></div>\n<p>토스트 알람 컴포넌트라 기본적으로 모달형식이다.   </p>\n<p>하지만 일반적으로 리액트 컴포넌트는 해당 컴포넌트를 부른 부모 컴포넌트의 dom트리 아래에 생성되기 때문에 react-dom패키지의 createPortal을 사용한다. </p>\n<p>child에 렌더링할 컴포넌트를, container 에 해당 컴포넌트를 렌더링할 컨테이너를 지정해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport { createPortal } from 'react-dom';\n\nconst ToastPortal = ({position, autoClose}) => {\n\n  return createPortal(\n    &lt;ToastContainer position={position}>\n      {toasts.map((item) => (\n        &lt;Toast\n          key={item.id}\n          mode={item.mode}\n          message={item.message}\n          onClose={() => removeToast(item.id)}\n        />\n      ))}\n    &lt;/ToastContainer>,\n    document.getElementById(\"modal-root\")\n  );\n}</code></pre></div>\n<p>ToastPortal은 이런식으로 작성했다.</p>\n<p>이번 프로젝트에서는 modal 컴포넌트들을 'modal-root'라는 id가 있는 div element에 렌더링하기로 논의가 되어 이런식으로 작성을 했다.</p>\n<h2>FowardRef &#x26; useImperativeHandle</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const ToastPortal = ({position, autoClose}) => {\n  const [toasts, setToast] = useState([]);\n\n  ...\n\n  const addMessage= (inputToast) => {\n    setToast([...toasts, {...inputToast, id: ID()]);\n\n  }\n\n  ...\n\n}</code></pre></div>\n<p>ToasstPortal 컴포넌트 내에 새로운 알람 메시지를 추가하기 위한 addMessage 함수를 작성했다.  </p>\n<p>하지만 기본적으로 부모 컴포넌트에서는 해당 함수에 접근 할 수가 없다.  </p>\n<p>그렇다고 부모 컴포넌트에서 toasts state를 해당 toastPortal의 props으로 렌더링을 하게 한다면, </p>\n<p> 해당 컴포넌트를 사용하는 사용자 입장에서 번거로울 것이다. </p>\n<p>이 때 useImperativeHandle을 사용한다면 부모 컴포넌트에서 ToastPortal의 addMessage에 접근할 수 있게된다. </p>\n<p>해당 훅을 사용한 코드는 아래와 같다.</p>\n<h3>자식 컴포넌트 (ToastPortal)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import {fowardRef, useImperativeHandle} from 'react'\n\nconst ToastPortal = ({position, autoClose}, ref) => {\n  const [toasts, setToast] = useState([]);\n  ...\n\n  // useImperativeHadle(ref, callback);\n  // 두번째 인자에는 객체를 리턴하는 함수를 정의하면된다\n  // addMessage에 setToast를 설정하는 메소드를 매핑해줬다. \n  useImperativeHandle(ref, () => ({\n    addMessage: (inputToast)=> {\n      setToasts([...toasts, { ...inputToast, id: ID() }]);\n    },\n  }));\n  ...\n\n}\n// fowardRef 를 통해 ref를 매개변수로 사용할 수 있음 \n// 부모 컴포넌트에서 useRef훅을 사용해 자식이 useImperativeHandle 로 전달한 콜백함수에 접근가능 </code></pre></div>\n<h3>부모 컴포넌트 (parent)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import {useRef} from 'react'\nimport ToastPortal from 'components/ToastPortal'\n\nconst Parent = () =>{\n  const toastRef = useRef();\n  const toast = {\n    mode: 'info',\n    message: '피자토스트'\n  }\n  const onClick = () =>{\n    if(toastRef.current){ \n      toastRef.current.addMessage(toast);\n    }\n  }\n\n  return(\n    &lt;>\n      &lt;ToastPortal ref={toastRef}/>\n      &lt;button onClick={onClick}>click &lt;/button>\n    &lt;/>\n  )\n}</code></pre></div>\n<h2>마치며</h2>\n<p>useImperativeHadle을 처음 써봤는데 부모측에서 ref를 통해 쉽게 자식 컴포넌트의 함수에 접근할 수 있는게 편했다.  </p>\n<p>이번 케이스처럼 부모측에서 간단하게 자식 함수에 접근해 자식컴포넌트의 state를 변경하는 상황이라면 굳이 redux나 context를 사용하지 않고 useImperativeHandle를 사용하면 된다.  </p>\n<p>물론 무분별한 ref사용은 react에서 권장하는 방법은 아니니 필요한곳에 신중히 사용해야 할듯하다.</p>","id":"5af419fc-1d30-5e42-8e02-b0341e3e2b60","frontmatter":{"title":"TIL - fowardRef, useImperativeHandle, createPortal","date":"August 04, 2021","tags":["react","toast","react-hook"]},"fields":{"slug":"/2021-08-04-TIL/"}}},{"node":{"excerpt":"CRA typescript 1. create-react-app create react app은 바벨이나 웹팩을 설정할 필요 없이 간단하게 리액트 프로젝트를 생성할때 유용하다. 현재 폴더위치에 프로젝트를 생성하려면 위처럼  프로젝트명 위치에 .만 입력해주면 된다. 2. Change tsconfig.json 프로젝트 생성이후 tsconfig.json…","html":"<h2>CRA typescript</h2>\n<h3>1. create-react-app</h3>\n<p>create react app은 바벨이나 웹팩을 설정할 필요 없이 간단하게 리액트 프로젝트를 생성할때 유용하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx create-react-app 프로젝트명 --template typescript  </code></pre></div>\n<p>현재 폴더위치에 프로젝트를 생성하려면 위처럼  프로젝트명 위치에 .만 입력해주면 된다.</p>\n<h3>2. Change tsconfig.json</h3>\n<p>프로젝트 생성이후 tsconfig.json 파일이 생성되어있을 텐데 만약 생성되어있지 않다면,</p>\n<p>yarn start로 실행시켜주면 자동으로 생성된다. </p>\n<p>tsconfig.json파일을 아래와 같이 바꾼다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"compilerOptions\": {\n    \"target\": \"es6\",\n    \"lib\": [\n      \"dom\",\n      \"dom.iterable\",\n      \"esnext\"\n    ],\n    \"baseUrl\": \"./src\",\n    \"allowJs\": true,\n    \"skipLibCheck\": true,\n    \"esModuleInterop\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"strict\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"noFallthroughCasesInSwitch\": true,\n    \"module\": \"esnext\",\n    \"moduleResolution\": \"node\",\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"noEmit\": true,\n    \"jsx\": \"react-jsx\"\n  },\n  \"include\": [\n    \"src\"\n  ]\n}</code></pre></div>\n<p>baseUrl 옵션을 './src'로 설정해 절대경로를 src기준으로 바꿔준다.</p>\n<hr>\n<h2>Ref📚</h2>\n<ul>\n<li><a href=\"https://create-react-app.dev/docs/adding-typescript/\">https://create-react-app.dev/docs/adding-typescript/</a></li>\n</ul>","id":"7404ac19-b253-54e8-a022-147db9d0ec49","frontmatter":{"title":"Create React App - TypeScript - 1","date":"August 01, 2021","tags":["cra","typescript"]},"fields":{"slug":"/2021-08-01-CRA/"}}},{"node":{"excerpt":"Mission in React ClassComponents 클래스 컴포넌트를 써야한다.. 클래스형 컴포넌트를 제대로 작성해본적이 없어 솔직히 머리아팠다. 초반에 코드를 작성하면서 계속 실수를 해서 그런지 작업속도가 느려졌다. 함수형 컴포넌트에 쓰던 훅이 그리워 졌다. Filter Filter 상품리스트를 state…","html":"<h2>Mission in React ClassComponents</h2>\n<p>클래스 컴포넌트를 써야한다..</p>\n<p>클래스형 컴포넌트를 제대로 작성해본적이 없어 솔직히 머리아팠다.</p>\n<p>초반에 코드를 작성하면서 계속 실수를 해서 그런지 작업속도가 느려졌다.</p>\n<p>함수형 컴포넌트에 쓰던 훅이 그리워 졌다.</p>\n<h2>Filter Filter</h2>\n<p>상품리스트를 state값을 옵션으로 하여 필터를 하는 컴포넌트를 만들었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> { productList\n            .filter((item) => filterOptions.brands.includes(item.brand))\n            .sort((a, b) => {\n              return filterOptions.sort === \"NEWEST\"\n                ? b.date - a.date\n                : a.price - b.price;\n            })\n            .map((item) => {\n              return &lt;RecentProduct item={item} key={item.id} />;\n            })}</code></pre></div>\n<p>filterOption내에 있는 값으로 filter로 거르고 sort로 정렬후 map으로 최종 array item들을 렌더링 하는 식으로 작성했다.</p>\n<h2>useRef in ClassComponents</h2>\n<p>협업을 하면서 sort옵션을 변경하는 컴포넌트를 맡게 되었다.</p>\n<p>popup selector로 구현하는 제약사항이 있었다.</p>\n<p>전에 함수형 컴포넌트로 비슷하게 구현한 적이있어 전에 작성했던 코드 기반으로 작성했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  componentDidMount() {\n    document.addEventListener(\"click\", this.handleClickOutside, true);\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.handleClickOutside, true);\n  }\n\n  handleClickOutside = (event) => {\n    if (this.wrapper &amp;&amp; !this.wrapper.current.contains(event.target)) {\n      this.closePopup();\n    }\n  };\n\n  render(){\n    ...\n    return(\n      ...\n  {isOpenPopup &amp;&amp; &lt;Popup handleFilter={this.props.handleFilter} />}\n      ...\n    )\n  }</code></pre></div>\n<p>componentDidMount()는 class components에서 컴포넌트가 트리에 삽입된 이후 호출되는 생명주기 함수다.</p>\n<p>그리고 componentsWillUnmount는 반대로 컴포넌트가 DOM에서 제거될때 호출되는 함수다.</p>\n<p>그리고 각각 eventListener를 추가 및 삭제해 자연스럽게 해당 컴포넌트가 dom에 렌더링 되어있을동안만 마우스 이벤트가 발생하도록 한다.</p>\n<p>함수형 컴포넌트 내에서는 useEffect훅을 사용해 componentsDidMount와 componentsWillUnmount를 동시에 처리한다.\n위 코드를 함수형 컴포넌트에서 사용한다면 아래와 같이 바꿔야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  useEffect(() => {\n    document.addEventListener(\"click\", this.handleClickOutside, true);\n    return () => {\n    document.removeEventListener(\"click\", this.handleClickOutside, true);\n    }\n  }, [])</code></pre></div>\n<p>하지만 해당 컴포넌트외부를 클릭했을때 이벤트가 발생되게 하려면 컴포넌트의 DOM값을 참조하여 처리를 해줘야한다.</p>\n<p>함수형 컴포넌트에서는 useRef 훅을 사용하고, class 컴포넌트에서는 콜백함수를 사용하거나 createRef를 사용해 처리한다.</p>\n<p>constructor내에 createRef를 추가하고 참조할 컴포넌트에 프로퍼티로 Ref를 추가하면된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Item extends React.Components {\n    constructor(props) {\n      super(props);\n      this.wrapper = React.createRef();\n  }\n  ..\n  handleClickOutside = (event) => {\n    if (this.wrapper &amp;&amp; !this.wrapper.current.contains(event.target)) {\n\n       //do something\n\n    }\n  };\n  ...\n  render(){\n    &lt;div ref={this.wrapper}>\n\n    &lt;/div>\n  }\n}</code></pre></div>\n<h2>After</h2>\n<p>클래스 컴포넌트를 한번도 안써보고 그냥 문서로만 봐서 그런지, 코딩하는데 속도가 많이 더뎠다.</p>\n<p>react 에서 권장하는게 함수형 컴포넌트 이기는하나, 현업에서 클래스 컴포넌트를 한번도 안쓴다는 보장도 없고 구글링하다 보면 많은 리액트 코드들이 클래스컴포넌트로 구성되어있어 당연히 다 숙지해야한다고 본다.  </p>\n<p>한번 클래스컴포넌트로 코딩해보면서 많은 도움이 되었다.\n하지만 아무래도 함수형컴포넌트로 작성하는게 코드도 더 짧고 직관적이라 개발하는데 더 수월한듯 하다. </p>","id":"0cfb72a6-9438-5cb9-8030-1dc29c9173c1","frontmatter":{"title":"TIL - Ref in ClassComponents","date":"July 31, 2021","tags":["til","react","react-hooks","classcomponents"]},"fields":{"slug":"/2021-07-31-TIL/"}}},{"node":{"excerpt":"cra에서는 웹팩과 바벨 설정을 기본적으로 해줘 아무 설정을 하지않아도 import 가 가능하다.   상대경로로 모듈을 import하면 가독성도 떨어지고, 프로젝트 규모가 커지면 import하기가 번거로워 진다. 설정 cra 에서는 세팅은 간단하다. 프로젝트의 루트 디렉토리에 jsconfig.json ( typescript에서는 tsconfig.json…","html":"<p>cra에서는 웹팩과 바벨 설정을 기본적으로 해줘 아무 설정을 하지않아도 import 가 가능하다.  </p>\n<p>상대경로로 모듈을 import하면 가독성도 떨어지고, 프로젝트 규모가 커지면 import하기가 번거로워 진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import Button from '../components/common/Button';\nimport Smile from '../../../Action/Smile';</code></pre></div>\n<h2>설정</h2>\n<p>cra 에서는 세팅은 간단하다. 프로젝트의 루트 디렉토리에 jsconfig.json ( typescript에서는 tsconfig.json )파일을 생성하고 해당 옵션을 추가하면된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"compilerOptions\": {\n    \"baseUrl\": \"./src\"\n  },\n  \"include\": [\"src\"]\n}</code></pre></div>\n<p><a href=\"https://create-react-app.dev/docs/importing-a-component/#absolute-imports\">ref</a></p>","id":"46942d31-07c8-5811-8879-9799a7a32b60","frontmatter":{"title":"간단하게 절대경로 세팅","date":"July 29, 2021","tags":["vscode","jsconfig","memo","react"]},"fields":{"slug":"/2021-07-29-jsconfig/"}}},{"node":{"excerpt":"useState Setter Override  무한 스크롤 컴포넌트를 개발해보면서 겪었던 버그였다. 마지막으로 호출된 updateList함수에서 받은 value가 기존에 추가되어야할 리스트값을 덮어 씌워버리는 현상이 있었다. 기존에 잘되던 코드에서 useState hook을 사용하며 두번째 인자인 setter…","html":"<h2>useState Setter Override </h2>\n<p>무한 스크롤 컴포넌트를 개발해보면서 겪었던 버그였다.<br>\n마지막으로 호출된 updateList함수에서 받은 value가 기존에 추가되어야할 리스트값을 덮어 씌워버리는 현상이 있었다.</p>\n<p>기존에 잘되던 코드에서 useState hook을 사용하며 두번째 인자인 setter함수를 두번 빠르게 의도치않게 호출하면서 발견하였다.</p>\n<p>코드 구성은 대략 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  const LIMIT = 10;\n  const [page, setPage] = useState(1);\n  const [list, setList] = useState([]);\n\n  const nextPage = () =>{\n    setPage(page+1);\n  }\n\n  useEffect(()=>{\n    updateList(page);\n  },[page]);\n\n  const updateList = async(page)=> {\n    const response= fetch(`${URI}/comment?page=${page}&amp;limit=&amp;{LIMIT}`);\n    const newValue= response.json();\n\n    setList([...list, ...newValue]);\n\n     ...\n  }\n\n  ...\n  const onInterSecting = () => {\n     nextPage();\n  }</code></pre></div>\n<p>특정 지점으로 내려가면 onInterSecting함수가 call back함수로 호출되어 내부의 nextPage함수가 호출된다. </p>\n<p>next함추가 호출되어 page값이 변경되면 useEffect 훅 내에 있는 updateList호출로 기존 리스트에 추가로 새로운 값이 추가되는 구조였다.</p>\n<p>기존에 리스트 값을 useState로 생성할때 이런식으로 아무생각없이 작성 하곤했다.</p>\n<p>하지만 이렇게 되면 문제점이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">first updateList(1) {\n  page: 1\n  list: [a, b, c]\n  //fetch page=1\n\n  newValue: [d, f, g]\n}\n\nsecond updateList(2) {\n  page: 2\n  list: [a, b, c]\n  //fetch page=2\n\n  newValue: [h, i, j]\n}</code></pre></div>\n<p>기본적으로 updateList는 호출되면서 컴포넌트내에 선언된 list 값에 참조를 하게되고 인자로는 page로 인자를 받아 최신 page값을 받아온다.</p>\n<p>하지만 이 구조에서 빠르게 update를 두번 호출하게 된다면, 실행된 updateList들은 실행된 시점에서의 updateList외부의 list state 값을 참조하게 된다.</p>\n<p>그 말은 곧 updateList 1 과 2는 같은 list 값을 가지게 되지만 page값은 서로 다른 값을 가지게 된다.</p>\n<p>결국 fetch에 실행되는 api호출에 인자가 page값이 서로 다르게 되기 된다. </p>\n<p>그래서 결국 처음 호출된 updateList()의 list 값과 두번째 호출된 함수의 list 값이 같게 되어 처음 실행된 ...newValue 값은 마지막 실행된 setPage에 의해 덮어 씌워지게 된다.\n이런 상황을 방지하려면 setter 함수 내에 콜백 함수를 넣어 최신 state값을 참조하게 하면된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  setList((prev)=>[...prev, ...newValue]);</code></pre></div>\n<h2>☕️ After</h2>\n<p>스타일링은 css 모듈로 한번 진행해 보았다.\n전에 사용해봤던 scss로 스타일링을 안하고 css로만 해서 그런지, scss의 생산성이 그리워졌다.<br>\n아무래도 간단한 요구사항이라 클래스명이 중복되는 상황이 나오지 않아 css module의 장점이 체감되지는 않았다. css module(or scss module)은 프로젝트 구조가 커지면 도입하는게 맞는것 같고, 개인적으로 간단한 프로젝트를 진행한다면 css-in-js로 빠르게 진행하는게 좋아보일듯 하다.</p>","id":"5caa112d-8325-5d2c-8805-ce1037e2c1dd","frontmatter":{"title":"TIL - Infinite Scroll","date":"July 27, 2021","tags":["til","react","react-hooks"]},"fields":{"slug":"/2021-07-27-TIL/"}}}]}},"pageContext":{}},
    "staticQueryHashes": ["2020347807","521078300","63159454"]}